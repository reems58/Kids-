<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงูุฃูู - ููุตุฉ ุชุนููู ุงูุฃุทูุงู</title>
    <link rel="stylesheet" href="../css/parent_dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-right">
                <h1 class="platform-title">๐ ููุตุฉ ุชุนููู ุงูุฃุทูุงู</h1>
            </div>
            <div class="header-left">
                <span class="welcome-text" id="welcomeText">ูุฑุญุจุงู</span>
                <button class="btn-settings" onclick="openSettings()">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
                <button class="btn-logout" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
        <button class="nav-tab" id="reportsTab" onclick="switchTab('reports')">
            <span class="tab-icon">๐</span>
            <span class="tab-text">ุงูุชูุงุฑูุฑ</span>
        </button>
        <button class="nav-tab" id="childrenTab" onclick="switchTab('children')">
            <span class="tab-icon">๐ถ</span>
            <span class="tab-text">ุงูุชุญูู ุจุงูุฃุทูุงู</span>
        </button>
        <button class="nav-tab" id="personalTab" onclick="switchTab('personal')">
            <span class="tab-icon">๐ค</span>
            <span class="tab-text">ุงููุนูููุงุช ุงูุดุฎุตูุฉ</span>
        </button>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Personal Information Tab -->
        <section class="content-section" id="personalSection" style="display: none;">
            <div class="section-card">
                <h2 class="section-title">๐ ูุนูููุงุชู ุงูุดุฎุตูุฉ</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <label>ุงูุงุณู:</label>
                        <span id="parentName">-</span>
                    </div>
                    <div class="info-item">
                        <label>ุงูููุน:</label>
                        <span id="parentGender">-</span>
                    </div>
                    <div class="info-item">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
                        <span id="parentEmail">-</span>
                    </div>
                    <div class="info-item">
                        <label>ุนุฏุฏ ุงูุฃุทูุงู:</label>
                        <span id="childrenCount">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Children Management Tab -->
        <section class="content-section" id="childrenSection">
            <div class="section-header">
                <h2 class="section-title">๐ถ ุฃุทูุงูู</h2>
                <button class="btn-add-child" onclick="openAddChildModal()">
                    <span class="btn-icon">โ</span>
                    <span class="btn-text">ุฅุถุงูุฉ ุทูู ุฌุฏูุฏ</span>
                </button>
            </div>
            <div id="childrenContainer" class="children-grid">
                <div class="loading-message">
                    <div class="loading-spinner">โณ</div>
                    <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
                </div>
            </div>
        </section>

        <!-- Reports Tab -->
        <section class="content-section" id="reportsSection" style="display: none;">
            <div id="reportsContainer" class="reports-container">
                <!-- Reports will be loaded here per child -->
            </div>
        </section>
    </main>

    <!-- Add Child Modal -->
    <div id="addChildModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">โ</span>
                    ุฅุถุงูุฉ ุทูู ุฌุฏูุฏ
                </h3>
                <span class="close-modal" onclick="closeAddChildModal()">&times;</span>
            </div>
            <form id="addChildForm" class="modal-form">
                <div class="form-group">
                    <label for="childName">ุงุณู ุงูุทูู</label>
                    <input type="text" id="childName" name="childName" placeholder="ุฃุฏุฎู ุงุณู ุงูุทูู" required>
                </div>
                <div class="form-group">
                    <label for="childGender">ุงูุฌูุณ</label>
                    <select id="childGender" name="childGender" required>
                        <option value="ุฐูุฑ" selected>ุฐูุฑ</option>
                        <option value="ุฃูุซู">ุฃูุซู</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="childBirthDate">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                    <input type="date" id="childBirthDate" name="birthDate" required>
                </div>
                <button type="submit" class="btn-save">
                    <span class="btn-icon">๐พ</span>
                    <span class="btn-text">ุญูุธ</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Edit Child Modal -->
    <div id="editChildModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">โ๏ธ</span>
                    ุชุนุฏูู ุจูุงูุงุช ุงูุทูู
                </h3>
                <span class="close-modal" onclick="closeEditChildModal()">&times;</span>
            </div>
            <form id="editChildForm" class="modal-form">
                <input type="hidden" id="editChildId" name="child_id">
                <div class="form-group">
                    <label for="editChildName">ุงุณู ุงูุทูู</label>
                    <input type="text" id="editChildName" name="childName" placeholder="ุฃุฏุฎู ุงุณู ุงูุทูู" required>
                </div>
                <div class="form-group">
                    <label for="editChildGender">ุงูุฌูุณ</label>
                    <select id="editChildGender" name="childGender" required>
                        <option value="ุฐูุฑ">ุฐูุฑ</option>
                        <option value="ุฃูุซู">ุฃูุซู</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editChildBirthDate">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                    <input type="date" id="editChildBirthDate" name="birthDate" required>
                </div>
                <div class="form-group">
                    <label for="editChildAge">ุงูุนูุฑ (ุณููุงุช)</label>
                    <input type="number" id="editChildAge" name="age" min="1" max="18" placeholder="ุงูุนูุฑ">
                    <small style="color: #666; font-size: 12px;">ุณูุชู ุญุณุงุจ ุงูุนูุฑ ุชููุงุฆูุงู ูู ุชุงุฑูุฎ ุงููููุงุฏ ุฅุฐุง ุชุฑูุชู ูุงุฑุบุงู</small>
                </div>
                <button type="submit" class="btn-save">
                    <span class="btn-icon">๐พ</span>
                    <span class="btn-text">ุญูุธ ุงูุชุนุฏููุงุช</span>
                </button>
                <button type="button" class="btn-cancel" onclick="closeEditChildModal()" style="margin-top: 10px;">
                    <span class="btn-text">ุฅูุบุงุก</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Manage Tasks Modal -->
    <div id="manageTasksModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header-tasks">
                <h3 class="modal-title-tasks">
                    <span class="modal-icon-small">๐</span>
                    <span id="manageTasksTitle">ุฅุฏุงุฑุฉ ุงูููุงู</span>
                </h3>
                <span class="close-modal" onclick="closeManageTasksModal()">&times;</span>
            </div>
            <div class="modal-body-tasks">
                <!-- Current Tasks Section -->
                <div class="current-tasks-section">
                    <h4 class="tasks-subtitle">ุงูููุงู ุงูุญุงููุฉ:</h4>
                    <div id="currentTasksList" class="current-tasks-list">
                        <!-- Tasks will be loaded here -->
                    </div>
                </div>
                
                <!-- Add New Task Section -->
                <div class="add-new-task-section">
                    <h4 class="tasks-subtitle">ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ:</h4>
                    <form id="addTaskFormModal" class="add-task-form-modal">
                        <input type="hidden" id="taskChildIdModal" name="child_id">
                        <div class="form-group-modal">
                            <label for="taskContentModal">ุงุฎุชุฑ ุงููุญุชูู:</label>
                            <select id="taskContentModal" name="content_id" required class="select-modal">
                                <option value="">ุงุฎุชุฑ ุงููุญุชูู...</option>
                            </select>
                        </div>
                        <div class="form-group-modal">
                            <label for="taskDurationModal">โฑ๏ธ ุงูููุช ุงููุฎุตุต (ุฏูุงุฆู):</label>
                            <input type="number" id="taskDurationModal" name="duration_minutes" value="10" min="1" max="120" required class="input-modal">
                            <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">ุญุฏุฏ ุงููุฏุฉ ุงูุฒูููุฉ ูููููุฉ (1-120 ุฏูููุฉ)</small>
                        </div>
                        <div class="form-group-modal">
                            <label for="taskNoteModal">ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
                            <textarea id="taskNoteModal" name="parent_note" rows="3" placeholder="ููุงุญุธุงุช ููุทูู....." class="textarea-modal"></textarea>
                        </div>
                        <button type="submit" class="btn-add-task-modal">ุฅุถุงูุฉ ุงููููุฉ</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">โ</span>
                    ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ
                </h3>
                <span class="close-modal" onclick="closeAddTaskModal()">&times;</span>
            </div>
            <form id="addTaskForm" class="modal-form">
                <input type="hidden" id="taskChildId" name="child_id">
                <div class="form-group">
                    <label for="taskContent">ุงููุญุชูู ุงูุชุนูููู</label>
                    <select id="taskContent" name="content_id" required>
                        <option value="">ุงุฎุชุฑ ุงููุญุชูู...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="taskNameAr">ุงุณู ุงููููุฉ (ุนุฑุจู)</label>
                    <input type="text" id="taskNameAr" name="task_name_ar" placeholder="ูุซุงู: ุชุนูู ุงูุฃุฑูุงู">
                </div>
                <div class="form-group">
                    <label for="taskDescription">ุงููุตู (ุงุฎุชูุงุฑู)</label>
                    <textarea id="taskDescription" name="description" rows="3" placeholder="ูุตู ุงููููุฉ..."></textarea>
                </div>
                <div class="form-group">
                    <label for="taskDuration">โฑ๏ธ ุงููุฏุฉ (ุจุงูุฏูุงุฆู)</label>
                    <input type="number" id="taskDuration" name="duration_minutes" value="10" min="1" max="120" required>
                    <small style="color: #666; font-size: 0.85em;">ุญุฏุฏ ุงููุฏุฉ ุงูุฒูููุฉ ูููููุฉ (1-120 ุฏูููุฉ)</small>
                </div>
                <div class="form-group">
                    <label for="taskOrder">ุงูุชุฑุชูุจ (ุงุฎุชูุงุฑู - ุงุชุฑูู ูุงุฑุบุงู ููุฅุถุงูุฉ ูู ุงูููุงูุฉ)</label>
                    <input type="number" id="taskOrder" name="order_index" min="0" placeholder="ุงูุชุฑุชูุจ">
                </div>
                <div class="form-group">
                    <label for="taskNote">ููุงุญุธุงุช ุงูุฃูู (ุงุฎุชูุงุฑู)</label>
                    <textarea id="taskNote" name="parent_note" rows="2" placeholder="ููุงุญุธุงุช..."></textarea>
                </div>
                <button type="submit" class="btn-save">
                    <span class="btn-icon">๐พ</span>
                    <span class="btn-text">ุฅุถุงูุฉ ุงููููุฉ</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">โ๏ธ</span>
                    ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ
                </h3>
                <span class="close-modal" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="settings-content">
                <div class="setting-section">
                    <label class="setting-label">
                        <span class="setting-icon">โ๏ธ</span>
                        ุชุนุฏูู ุงูุงุณู
                    </label>
                    <div class="setting-input-group">
                        <input type="text" id="editName" class="setting-input" value="">
                        <button class="btn-save-setting" onclick="saveName()">ุญูุธ ุงูุงุณู</button>
                    </div>
                </div>
                <div class="setting-section">
                    <label class="setting-label">
                        <span class="setting-icon">๐ง</span>
                        ุชุนุฏูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                    </label>
                    <div class="setting-input-group">
                        <input type="email" id="editEmail" class="setting-input" value="">
                        <button class="btn-save-setting" onclick="saveEmail()">ุญูุธ ุงูุจุฑูุฏ</button>
                    </div>
                </div>
                <div class="setting-section">
                    <label class="setting-label">
                        <span class="setting-icon">๐</span>
                        ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
                    </label>
                    <div class="setting-input-group">
                        <input type="password" id="currentPassword" class="setting-input" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ">
                        <input type="password" id="newPassword" class="setting-input" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                        <button class="btn-save-setting" onclick="savePassword()">ุญูุธ ูููุฉ ุงููุฑูุฑ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievementsModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">๐</span>
                    ุงูุฅูุฌุงุฒุงุช
                </h3>
                <span class="close-modal" onclick="closeAchievementsModal()">&times;</span>
            </div>
            <div class="achievements-content" id="achievementsContent">
                <div class="loading-message" style="text-align: center; padding: 40px;">
                    <div class="loading-spinner">โณ</div>
                    <p>ุฌุงุฑู ุชุญููู ุงูุฅูุฌุงุฒุงุช...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/task_manager.js"></script>
    <script src="../js/parent_dashboard.js"></script>
</body>
</html>
